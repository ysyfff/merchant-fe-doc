# version: 2
# jobs:
#   deploy-website:
#     docker:
#       # specify the version you desire here
#       - image: circleci/node:7.10

#     steps:
#       - checkout
#       - run:
#           name: Deploying to GitHub Pages
#           command: |
#             git config --global user.email "ysyfff@users.noreply.github.com"
#             git config --global user.name "ysyfff"
#             echo "machine github.com login ysyfff password $GITHUB_TOKEN" > ~/.netrc
#             cd website && yarn install && GIT_USER=ysyfff yarn run publish-gh-pages

# workflows:
#   version: 2
#   build_and_deploy:
#     jobs:
#       - deploy-website
#         # filters: *filter-only-master   

version: 2
jobs:
  build:
    docker:
      # specify the version you desire here
      - image: circleci/node:7.10
      
      # Specify service dependencies here if necessary
      # CircleCI maintains a library of pre-built images
      # documented at https://circleci.com/docs/2.0/circleci-images/
      # - image: circleci/mongo:3.4.4

    working_directory: ~/merchant-fe-doc/website

    steps:
      - checkout

      - run:
        name: Deploying to GitHub Pages
        command: |
          git config --global user.email "ysyfff@users.noreply.github.com"
          git config --global user.name "ysyfff"
          echo "machine github.com login ysyfff password $GITHUB_TOKEN" > ~/.netrc
          cd website && yarn install && GIT_USER=ysyfff yarn run publish-gh-pages

      # Download and cache dependencies
      # - restore_cache:
      #     keys:
      #     - v1-dependencies-{{ checksum "package.json" }}
      #     # fallback to using the latest cache if no exact match is found
      #     - v1-dependencies-

      # - run: cd website && yarn install

      # - save_cache:
      #     paths:
      #       - node_modules
      #     key: v1-dependencies-{{ checksum "package.json" }}
        
      # run tests!
      # - run: cd website && yarn publish-gh
